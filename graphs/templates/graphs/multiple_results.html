{% extends 'base.html' %}
{% load static %}
{% load crispy_forms_tags %}
{% block banner_text %}
<h1>Compare Personality</h1>
{% endblock %}

{% block body %}
<div id="gtco-services">
    <div class="gtco-container">
        <div class="animate-box">
            <div class="col-md-offset-2 text-center gtco-heading">
                {% if plot %}
                {% include 'includes/graph_instructions.html' %}
                {{ plot|safe }}
                {% endif %}
                <form method="POST">
                    <div class="form-group">
                        {% csrf_token %}
                        {{ form|crispy }}
                        <button type="submit" class="btn btn-success">Submit </button>
                        <p>Enter the Test IDs of your friends (separated by commas) to compare your personalities with
                            theirs.
                            {% if request.answer_group %}The ID of your
                            last attempted test is {{ request.answer_group }}
                            {% endif %}
                        </p>
                </form>
            </div>
            <div class="animate-box">
                <div class="col-md-offset-2 text-center gtco-heading">
                    <h3>Example: </h3>
                    <img class="img img-thumbnail" src="{% static 'graphs/images/multiple_results.jpg' %}"
                        alt="graph_instructions">
                </div>
            </div>

            <div class="animate-box">
                <div class="col-md-offset-2 text-center gtco-heading">

                    {% for data in grouped_data %}
                    <div class="card-deck">
                        {% for dict in data %}
                        {% if dict.master %}
                        {% else %}
                        <div class="card mb-3 {% if dict.master %}bg-dark{% else %}border-primary{% endif %}">
                            <div class="card-header text-success">{{ dict.answer_group_pk }}: {{ dict.name }}</div>
                            <div class="card-body">
                                <p class="card-text text-info">Percentage difference: {{ dict.percentage }}%</p>
                                <div class="card-footer bg-transparent border-success">Footer</div>
                            </div>
                        </div>
                        {% endif %}
                        {% endfor %}
                    </div>
                    {% endfor %}

                </div>
            </div>

        </div>
    </div>
</div>
{% endblock %}